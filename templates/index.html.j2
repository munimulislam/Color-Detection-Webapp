<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color Detection App</title>
    <link rel="stylesheet" href="/static/styles.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/htmx.org@2.0.8/dist/htmx.min.js"></script>
    <script src="/static/dropzone.js" defer></script>
</head>

<body>
    <nav class="navbar navbar-light bg-primary mb-4">
        <div class="container-fluid text-light py-2">
            <h3>Color Detection App</h3>
        </div>
    </nav>

    <div class="container">
        <form class="mt-5" hx-post="/" hx-target="#results" hx-swap="innerHTML show:bottom transition:true"  enctype="multipart/form-data"
            id="uploadForm">
            <div class="mb-3">
                <label for="file" class="form-label fs-2 fw-semibold">Upload an Image</label>
                <div id="dropZone" class="border-2 border-dashed border-primary-subtle rounded p-5 text-center bg-light"
                    style="cursor: pointer; transition: all 0.3s ease;">
                    <svg class="mb-3" width="48" height="48" fill="currentColor" viewBox="0 0 16 16">
                        <path
                            d="M8 5a.5.5 0 0 1 .5.5v3.362l1.146-1.147a.5.5 0 0 1 .707.707l-2.5 2.5a.5.5 0 0 1-.707 0l-2.5-2.5a.5.5 0 1 1 .707-.707L7.5 9.362V5.5A.5.5 0 0 1 8 5z" />
                        <path d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2z" />
                    </svg>
                    <p class="mb-2"><strong>Drag & drop your image here</strong></p>
                    <p class="text-muted mb-3">or</p>
                    <input id="file" name="file" type="file" accept="image/*,android/allowCamera" required
                        class="d-none">
                    <div class="d-flex justify-content-center gap-2">
                        <button type="button" class="btn btn-primary" onclick="document.getElementById('file').click()">Choose File</button>
                    </div>
                    <p id="fileName" class="text-center text-success d-none"></p>
                </div>
            </div>
            <div>
                <p id="file-error" class="text-danger "></p>
            </div>
            <div class="d-flex flex-column flex-md-row mt-3" style="width:100%">
                <div class="flex-fill">
                    <div id="image-holder" style="height: auto; max-height: 300px; width: auto; max-width: 500px" class="d-none">
                        <img id="image-preview" style="object-fit: cover;" src="#" class="img-thumbnail mt-2" alt="preview">
                    </div>
                    <div id="numOfColorSelection" class="d-none mt-4" style="width: auto; max-width: 500px">
                        <label for="numOfColors" class="form-label fw-semibold">Number of colors to detect:</label>
                        <input type="number" min="1" name="numOfColors" value="5" required class="form-control" id="numOfColors">
                    </div>
                    <button type="submit" class="btn btn-success mt-3" id="submitBtn" disabled>Submit</button>
                </div>
                <div id="results" class="flex-fill"></div>
            </div>
        </form>
    </div>
</body>

</html>